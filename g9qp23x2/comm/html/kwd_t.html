<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
			
		<title>推广服务</title>
		<style type="text/css">
body ul form{
	margin:0; 
	padding:0;
}
body a{
	font-family: Georgia, "Times New Roman","Microsoft YaHei", "微软雅黑",STXihei, "华文细黑", serif;	
}
body, em {
	font-size:12px; 
	font-family:Arial;
}

img {
	border:0; 
	vertical-align:middle;
}

.tag{
	position:absolute;
	text-align: center;
	display:block;
	color:#000000;
	text-decoration: none; 
	z-index: 2;
}

.tag:hover{
	z-index: 3;
	color:#000000;
	background: #FFFFFF;
}

.tag.hover{
	z-index: 3;
	color:#000000;
	background: #FFFFFF;	
}

a.logo {
    display:block;
    height:18px;
    width:26px;
    text-align:justify;
    letter-spacing:20px;
    text-decoration:none;
    overflow:hidden;
    cursor:default;
    position:absolute;
    bottom:0px;
    right:0px;
    z-index: 5;
}
.global a.logo {
    filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(
        enabled=true,
        src="http://p.inte.sogou.com/testgpimg/sogou_icon_short.png",
        sizingMethod="image"
    );
    background:url(http://p.inte.sogou.com/testgpimg/sogou_icon_short.png) no-repeat left top;
    _background:none;
    filter: alpha(opacity=100);
    opacity: 1;
}
.global a.logo:hover{
    width:78px;
    background-position:0px 0px !important;
    filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(
        enabled=true,
        src="http://p.inte.sogou.com/testgpimg/sogou_icon_long.png",
        sizingMethod="image"
    );
    background:url(http://p.inte.sogou.com/testgpimg/sogou_icon_long.png) no-repeat left top;
    _background:none;
    filter: alpha(opacity=100);
    opacity: 1;
}
.global div#logo_overlay{
    background-image:none;
    _background:none;
}
.global div#logo_overlay:hover{
    z-index: 1;
    width:78px;
    filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(
        enabled=true,
        src="http://p.inte.sogou.com/testgpimg/sogou_icon_long.png",
        sizingMethod="image"
    );

    background:url(http://p.inte.sogou.com/testgpimg/sogou_icon_long.png)  no-repeat left top;
    _background:none;
}

.small{
	background: #F48E82;
	border:solid 2px #F48E82;		
}

.middle{
	background: #F48E82;
	border:solid 2px #F48E82;	
}

.big{
	background: #F48E82;
	border:solid 2px #F48E82;	
}

body{
    background:#FFFFFF;
}
		</style>
	</head>
	<body marginwidth="0" marginheight="0">
		<script>

var s_clr = "#F48E82";          
var m_clr = "#F48E82";      
var b_clr = "#F48E82";

//后端生成的变量
//第二部分：新加入的在js代码中应用的字段
var total_height = 90;		//新字段
var total_width = 958; 		//新字段				
var h_num = 3;				//新字段
var w_num = 6;				//新字段
var coor = [{"size":3,"x":0,"y":1},{"size":2,"x":2,"y":0},{"size":2,"x":4,"y":0},{"size":2,"x":3,"y":1},{"size":2,"x":5,"y":1},{"size":1,"x":0,"y":0},{"size":1,"x":1,"y":0},{"size":1,"x":3,"y":0},{"size":1,"x":5,"y":0},{"size":1,"x":2,"y":2},{"size":1,"x":4,"y":2}];				//新字段

//第三部分：原有的其他字段
var mt_preview= "";
var fontsize = 16;			//未使用，建议保留，可能在陆续版本中使用
var tm1 = 4;
var kwd_abtest_type = -1;
var dis_num = 24;				//未使用


var pid="gawxp78";
var kwd_list="处女膜图片,女用自慰器,阴道口构造,一夜情交友,两性性生活,做爱姿势,性交快,性交姿势,真人游戏,斗地主,少妇交友";
var kwd_flag="5,5,5,5,5,5,5,5,5,5,5";
var real_kwd_list="处女膜治疗,女用自慰工具,女人的阴道,大学生交友,两性性生活,做爱出血诊断,性交快,充气娃娃,真人游戏,斗地主,征婚交友婚介";
var skwd_id = "";				//未使用
var sohuurl="http://xx.com/li93q9w/g9qp23x2.html";
var pvid="187c1552967acb1e";
var asid="298042";
var lu_uniq="0";
var show_num = 0;
var page_pvid="432ceb4e6f0909a7";
var bi=2;
var title=""; 

var sig="4f925075";
var tm="12311724";
var zip = 1;
var related = 0;
var page_id = "";
var mkt_cc = "";
var hl_wrd = "";				//未使用
var logo_flag = "";
var char_font = "1";			//未使用



function mt_page()
{
	if (mt_preview == 1)						
	{
	    document.write("<div id='mkt' onclick='document.getElementById(\"mkt\").style.display=\"none\";' style='top:0px; left:0px; width:100%; height:100%;line-height:150%;background-color:rgb(0,93,181);position:absolute;z-index:10000;text-align:center;font-family:YaHeiConsolas,\"Microsoft YaHei\",\"微软雅黑\";font-size:"
	    				+fontsize+"px;color:white;'>搜狗联盟广告位，点击开始展示</div>");
	   	
	}
	
}

var base64EncodeChars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"; 
var base64DecodeChars = new Array( 
	-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 
	-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 
	-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 62, -1, -1, -1, 63, 
	52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1, -1, -1, -1, -1, -1, 
	-1,	0,	1,	2,	3,  4,  5,	6,	7,	8,	9, 10, 11, 12, 13, 14, 
	15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, -1, -1, -1, -1, -1, 
	-1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 
	41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, -1, -1, -1, -1, -1); 
function base64encode(str) 
{ 
	var out, i, len; 
	var c1, c2, c3; 
	len = str.length; 
	i = 0; 
	out = ""; 
	while(i < len) { 
    c1 = str.charCodeAt(i++) & 0xff; 
    if(i == len) 
    { 
    	 out += base64EncodeChars.charAt(c1 >> 2); 
    	 out += base64EncodeChars.charAt((c1 & 0x3) << 4); 
    	 out += "=="; 
    	 break; 
    } 
    c2 = str.charCodeAt(i++); 
    if(i == len) 
    { 
    				 out += base64EncodeChars.charAt(c1 >> 2); 
    				 out += base64EncodeChars.charAt(((c1 & 0x3)<< 4) | ((c2 & 0xF0) >> 4)); 
    				 out += base64EncodeChars.charAt((c2 & 0xF) << 2); 
    				 out += "="; 
    				 break; 
    } 
    c3 = str.charCodeAt(i++); 
    out += base64EncodeChars.charAt(c1 >> 2); 
    out += base64EncodeChars.charAt(((c1 & 0x3)<< 4) | ((c2 & 0xF0) >> 4)); 
    out += base64EncodeChars.charAt(((c2 & 0xF) << 2) | ((c3 & 0xC0) >>6)); 
    out += base64EncodeChars.charAt(c3 & 0x3F); 
	} 
	return out; 
} 
function base64decode(str) 
{ 
	var c1, c2, c3, c4; 
	var i, len, out; 
	len = str.length; 
	i = 0; 
	out = ""; 
	while(i < len) { 
    /* c1 */ 
    do { 
    	 c1 = base64DecodeChars[str.charCodeAt(i++) & 0xff]; 
    } while(i < len && c1 == -1); 
    if(c1 == -1) 
    	 break; 
    /* c2 */ 
    do { 
    	 c2 = base64DecodeChars[str.charCodeAt(i++) & 0xff]; 
    } while(i < len && c2 == -1); 
    if(c2 == -1) 
    	 break; 
    out += String.fromCharCode((c1 << 2) | ((c2 & 0x30) >> 4)); 
    /* c3 */ 
    do { 
    				 c3 = str.charCodeAt(i++) & 0xff; 
    				 if(c3 == 61) 
    	 return out; 
    	 c3 = base64DecodeChars[c3]; 
    } while(i < len && c3 == -1); 
    if(c3 == -1) 
    	 break; 
    out += String.fromCharCode(((c2 & 0XF) << 4) | ((c3 & 0x3C) >> 2)); 
    /* c4 */ 
    do { 
    				 c4 = str.charCodeAt(i++) & 0xff; 
    				 if(c4 == 61) 
    	 return out; 
    	 c4 = base64DecodeChars[c4]; 
    } while(i < len && c4 == -1); 
    if(c4 == -1) 
    	 break; 
    out += String.fromCharCode(((c3 & 0x03) << 6) | c4); 
    } 
	return out; 
} 
function utf16to8(str) 
{ 
	var out, i, len, c; 
	out = ""; 
	len = str.length; 
	for(i = 0; i < len; i++) { 
        c = str.charCodeAt(i); 
        if ((c >= 0x0001) && (c <= 0x007F)) { 
        	 out += str.charAt(i); 
        } else if (c > 0x07FF) { 
        				 out += String.fromCharCode(0xE0 | ((c >> 12) & 0x0F)); 
        				 out += String.fromCharCode(0x80 | ((c >>	6) & 0x3F)); 
        				 out += String.fromCharCode(0x80 | ((c >>	0) & 0x3F)); 
        } else { 
        				 out += String.fromCharCode(0xC0 | ((c >>	6) & 0x1F)); 
        				 out += String.fromCharCode(0x80 | ((c >>	0) & 0x3F)); 
        } 
	} 
	return out; 
} 
function utf8to16(str) 
{ 
	var out, i, len, c; 
	var char2, char3; 
	out = ""; 
	len = str.length; 
	i = 0; 
	while(i < len) { 
    c = str.charCodeAt(i++); 
        switch(c >> 4) 
        { 
        	 case 0: case 1: case 2: case 3: case 4: case 5: case 6: case 7: 
        				 // 0xxxxxxx 
        				 out += str.charAt(i-1); 
        				 break; 
        	 case 12: case 13: 
        				 // 110x xxxx?? 10xx xxxx 
        				 char2 = str.charCodeAt(i++); 
        				 out += String.fromCharCode(((c & 0x1F) << 6) | (char2 & 0x3F)); 
        				 break; 
        	 case 14: 
        				 // 1110 xxxx??10xx xxxx??10xx xxxx 
        				 char2 = str.charCodeAt(i++); 
        				 char3 = str.charCodeAt(i++); 
        				 out += String.fromCharCode(((c & 0x0F) << 12) | 
        								((char2 & 0x3F) << 6) | 
        								((char3 & 0x3F) << 0)); 
        	 break; 
        } 
    } 
	return out; 
} 
function send_pv_ok()
{
    if (typeof(document.pv_ok)=='undefined') document.pv_ok = new Array();
    var a = new Image();
    a.src = "http://wb.brand.sogou.com/not_ok_pv?pid=" + pid;
    document.pv_ok.push(a);
}

function l(p)
{
    return (typeof encodeURIComponent=="function" ? encodeURIComponent(p) :escape(p));
}
function url(kwd, flag, sq, test, goto_url)										//"尿频的症状"，23，"尿频的症状"，"0"
{
    var kwdarr= kwd_list.split(",");									//"尿频的症状,脊椎疼痛,慢性皮肤过敏,治疗慢性皮炎,求医问药网,求医问药,肾炎低血压,十二指肠炎症,性疾病的征兆,高血压眩晕"
    var flgarr= kwd_flag.split(",");									//"23,23,23,23...,23"
    var realkwdarr = real_kwd_list.split(",");
    var count = kwdarr.length;											//10
    if (kwd.length > 6) {												//5
		count=3;														
    }
    if(count>4) count=4;												//count = 4
    var kwd_l="";
    var realkwd_l="";
    var flg_l="";
    for(var i=0;i<count-1;i++)
    {
        kwd_l =kwd_l + kwdarr[i] + ",";							
        realkwd_l = realkwd_l + realkwdarr[i] + ",";
        flg_l =flg_l + flgarr[i] + ",";
    }
    kwd_l += kwdarr[count-1];											//"尿频的症状,脊椎疼痛,慢性皮肤过敏,治疗慢性皮炎"
    realkwd_l += realkwdarr[count-1];
    flg_l += flgarr[count-1];											//"23,23,23,23"	这里只是单纯地截短了数组而已
    expids = "3002,3102,3501";
    cloud = "6,3,1,2,0";
    u = "pid="+pid+"&fmt=ads&kwd="+l(kwd)+"&kl="+l(kwd_l)+"&kf="+flag+
    	"&fl="+l(flg_l)+"&pvid="+pvid+"&id="+asid+"&lu_uniq="+lu_uniq+
    	"&sohuurl="+sohuurl+"&tm1="+tm1+"&k_ab="+kwd_abtest_type+
    	"&sq="+l(sq)+"&rl="+l(realkwd_l)+"&rnd="+page_pvid+"&bi="+bi+
    	"&sig="+sig+"&tm="+tm+"&related="+related+"&ti="+title+
    	"&mkt="+mt_preview+"&pageid="+page_id+"&mkt_cc="+mkt_cc+"&expids="+expids+"&cloud="+cloud;
    if(1 == zip)
    {
        u_base = "kwd="+l(kwd)+"&zflg=1&w="+base64encode(utf16to8(u))+"&sohuurl="+sohuurl;	//缩略版需要base64压缩
    }
    else
    {
        u_base = u;
    }
    f_url = "http://lu.sogou.com/ads?"+u_base;							//full_url
    is_game_test = "0";
    is_search_keyword = "0";													//后端写入	
    if(is_game_test == "1" && test == "1")
    {
        f_site = "http://mini.cpc.sogou.com/gamesp/index.php?";
        f_url = f_site + u_base;
    }
    else if(is_search_keyword == "1")
    {
        f_url = goto_url;
    }
    else
    {
        is_new_lvl2 = "0";												//如果有二级页
        if (is_new_lvl2 == "1")
        {
            f_site = "http://inte1.sogou.com/ads?";						//二级页请求地址
            f_url =  f_site + u_base;
        }
    }
    return f_url;														//在寻医问药中，返回的地址是二级页地址
}
function push_info()
{
    var kwd_arr = kwd_list.split(",");	//"尿频的症状,脊椎疼痛,慢性皮肤过敏,治疗慢性皮炎,求医问药网,求医问药,肾炎低血压,十二指肠炎症,性疾病的征兆,高血压眩晕"
    var real_kwd_arr = real_kwd_list.split(",");
    var flag_arr = kwd_flag.split(",");
    var is_game_test_list = "0,0,0,0,0,0,0,0,0,0,0";
    var is_game_test_arr = is_game_test_list.split(",");
    var goto_url_list = "";
    var goto_url_arr = goto_url_list.split(",");

    for(var i=0;i<kwd_arr.length;++i)									//获取dis_info长度为10，记录的是每一个标签的title以及url
    {
        dis_info.push({
        	text:kwd_arr[i],title:(kwd_arr[i]),
        	url:url(real_kwd_arr[i], flag_arr[i], kwd_arr[i], is_game_test_arr[i], goto_url_arr[i])		//举例：url中传入"尿频的症状"，23，"尿频的症状"，"0"
        }); 															//参数：text，title，url
    }
}

var div = document.createElement("div");
var margin = 2;
var border = 2;
var cell_h = total_height / h_num;
var cell_w = total_width / w_num;
var dis_info = [];
var carArr = [];

var classMap = ["tag small","tag middle","tag big"];
var hMap = [1,2,2];
var wMap = [1,1,2];
var fsMap = [14,17,23];//TODO fontsize
var checkIEversion = function(){
    var ua = navigator.userAgent;
    if(/MSIE ([^;]+)/.test(ua)){
        return RegExp["$1"];
    }
    return null;
}();

var tagComplete = function(tagParam,data,cell_w,cell_h,margin,border){
    var s = tagParam.size-1;
    
    tagParam.text = data.text;
    tagParam.url = data.url;
    tagParam.title = data.title;
    tagParam.className=classMap[s];
    
    if(checkIEversion && checkIEversion < 6){
        tagParam.left = tagParam.x*cell_w+margin/2+"px";
        tagParam.top = tagParam.y*cell_h+margin/2+"px";
        
        tagParam.w = wMap[s]*cell_w-margin+"px";
        tagParam.h = hMap[s]*cell_h-2*margin-border+"px";
        
    }else{
        tagParam.left = tagParam.x*cell_w+margin/2+"px";
        tagParam.top = tagParam.y*cell_h+margin/2+"px";
        
        tagParam.w = wMap[s]*cell_w-2*margin-border+"px";
        tagParam.h = hMap[s]*cell_h-2*margin-border+"px";
    }
    var fsCheck1 = (wMap[s]*cell_w-2*margin-border)/tagParam.title.length;
    var fsCheck2 = hMap[s]*cell_h-2*margin-border;
    var fsCheck  = fsCheck1 < fsCheck2 ? fsCheck1 : fsCheck2; 
    if(fsMap[s]>fsCheck){ 
        tagParam.fsize = Math.floor(fsCheck - 1)+"px";
    }else{
        tagParam.fsize = fsMap[s]+"px";
    }
};

var createEle = function(tagParam){
    var aTag = document.createElement("a");
    var ele = document.createElement("div");
    if(aTag.innerText){
        aTag.innerText = tagParam.text;
    }else{
        aTag.appendChild(document.createTextNode(tagParam.text));
    }
    aTag.setAttribute("title",tagParam.title);
    aTag.setAttribute("href",tagParam.url);
    aTag.setAttribute("target","_blank");
    
    aTag.className = tagParam.className;
    aTag.style.left = tagParam.left;
    aTag.style.top = tagParam.top;
    aTag.style.height = aTag.style.lineHeight = tagParam.h;
    aTag.style.width = tagParam.w;
    aTag.style.fontSize = tagParam.fsize;
    
    ele.setAttribute("id","div_textlink");  
    
    ele.appendChild(aTag);
    
    if(tagParam.size == 3 || (tagParam.size == 1 && (w_num == 1 || h_num == 1)) || (w_num == 2 && h_num <=3 )){ 
        carArr.push(aTag);
    }
    return ele;
};


function render_page(){
    push_info();
    for(var i = 0, len = coor.length; i < len; i++){
        var tagParam = coor[i];
        tagComplete(tagParam,dis_info[i],cell_w,cell_h,margin,border);  
        ele = createEle(tagParam);
        
        div.appendChild(ele);       
    }
    div.setAttribute("id","div_ad");        
    document.body.appendChild(div);
    
    if(logo_flag == 1){                                                 
        document.write('<div class="global">');
        document.write('<a id="logo" class="logo" href="http://wangmeng.sogou.com/" target="_blank"></a>');
        document.write('<div id="logo_overlay"></div>');
        document.write('</div>');
    }

    var addHandler = function(element, type, handler){
        if (element.addEventListener){
            element.addEventListener(type, handler, false);
        } else if(element.attachEvent){
            element.attachEvent("on" + type , handler);
        } else {
            element["on" + type] = handler;
        }
    };
    var getEvent = function(event){
        return event ? event : window.event;
    };
    var getTarget = function(event){
        return event.target || event.srcElement;
    };
    
    var setCarousel = function(){   
        
        for(var i = 0 , len = carArr.length; i < len ; i ++){           
                carArr[i].style.background = b_clr;                     
        }
        
        
        carouselItervalId = setInterval(function(carArr){
            return function(){
                
                var hover_flag = 0;
                if(carArr == undefined || carArr.length<=0){
                    return;
                }
                for(var i = 0 , len = carArr.length; i < len ; i ++){
                    if(carArr[i].className.indexOf('hover')>=0){
                        carArr[(i+1)%len].className = carArr[i].className;
                        carArr[(i+1)%len].style.background = carArr[i].style.background;
                        carArr[i].className = classMap[2];
                        carArr[i].style.background = b_clr;
                        hover_flag = 1;
                        break;
                    };
                }
                if(!hover_flag){    
                    carArr[0].className = classMap[2]+" hover";
                    carArr[0].style.background = "#FFFFFF";
                }
            };  
        }(carArr),2000);
    };
    setCarousel();
   
     var clearCarousel = function(carArr){return function(event){
        for(var i = 0, count = carArr.length ; i < carArr.length ; i++){
            carArr[i].className = classMap[2];
            carArr[i].style.background = b_clr;
        }
        var e = getEvent(event);
        var t = getTarget(e);
        if(t.className.indexOf('big')>0)
        t.style.background = "#FFFFFF";
        if(carouselItervalId){  
            clearInterval(carouselItervalId);
            carouselItervalId = null;
        }
    };}(carArr);
    
    
    addHandler(div,'mouseover',clearCarousel);
    addHandler(div,'mouseout',setCarousel);
        
    mt_page();
};
render_page();
</script>
 
</body></html>